import{Z as se,$,a0 as ee,a1 as ie,L as ue,a2 as de,J as me,r as z,a3 as pe,a4 as fe,a5 as G,a6 as Y,a7 as O,b,c as R,o as p,w as m,d as r,f as y,a8 as F,a9 as W,aa as s,_ as L,W as P,X as _,Y as c,u as ve,ab as ke,ac as ce,a as ne,ad as Z,ae as q,j as be,af as J,ag as te,ah as X,ai as ae,aj as re}from"./mixins-Bi4KBgug.js";const he=Object.assign(Object.assign({},pe),fe),ge=se({__GRID_ITEM__:!0,name:"FormItemGridItem",alias:["FormItemGi"],props:he,setup(){const o=z(null);return{formItemInstRef:o,validate:(...g)=>{const{value:f}=o;if(f)return f.validate(...g)},restoreValidation:()=>{const{value:g}=o;g&&g.restoreValidation()}}},render(){return $(me,ee(this.$.vnode.props||{},de),{default:()=>{const o=ee(this.$props,ie);return $(ue,Object.assign({ref:"formItemInstRef"},o),this.$slots)}})}}),_e=["innerHTML"],ye={__name:"FormTripsSessionsCheckboxes",props:G({sessions:Array,fullTrips:Array,disabledTrips:Array},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(o){const e=o,l=Y(o,"modelValue"),g=O(()=>e.sessions.map(f=>{let t=f.name;return e.fullTrips.includes(f.id)&&(t+=' <span style="color: #ff2626">(plena!)</span>'),{...f,name:t}}));return(f,t)=>{const v=b("n-checkbox"),a=b("n-space"),h=b("n-checkbox-group");return p(),R(h,{value:l.value,"onUpdate:value":t[0]||(t[0]=n=>l.value=n),style:{"margin-top":"8px"}},{default:m(()=>[r(a,{vertical:""},{default:m(()=>[(p(!0),y(F,null,W(g.value,n=>(p(),R(v,{key:n.id,value:n.id,disabled:o.disabledTrips.includes(n.id)},{default:m(()=>[s("span",{innerHTML:n.name},null,8,_e)]),_:2},1032,["value","disabled"]))),128))]),_:1})]),_:1},8,["value"])}}},Ve={class:"trip"},xe={key:0,style:{"margin-top":"2px"}},je=["innerHTML"],Oe={__name:"FormTripsTrip",props:G({trip:Array,fullTrips:Array,disabledTrips:Array},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(o){const e=Y(o,"modelValue"),l=z(!1),g=z(""),f=z("");function t(v){g.value=v.id+". "+v.name,f.value=v.description,l.value=!0}return(v,a)=>{const h=b("n-button"),n=b("n-modal");return p(),y(F,null,[s("div",Ve,[s("h6",null,[_(c(o.trip.id)+". "+c(o.trip.name)+" – "+c(o.trip.price)+" € ",1),o.trip.description?(p(),R(h,{key:0,text:"",style:{"font-size":"24px"},onClick:a[0]||(a[0]=u=>t(o.trip))},{default:m(()=>[r(ve(ke),{color:"#2050cf"},{default:m(()=>[r(ce)]),_:1})]),_:1})):P("",!0)]),o.trip.subtitle?(p(),y("div",xe,c(o.trip.subtitle),1)):P("",!0),r(ye,{modelValue:e.value,"onUpdate:modelValue":a[1]||(a[1]=u=>e.value=u),sessions:o.trip.sessions,"full-trips":o.fullTrips,"disabled-trips":o.disabledTrips},null,8,["modelValue","sessions","full-trips","disabled-trips"])]),r(n,{show:l.value,"onUpdate:show":a[2]||(a[2]=u=>l.value=u),preset:"card",style:{"max-width":"900px"},title:g.value,size:"small"},{default:m(()=>[s("div",{innerHTML:f.value},null,8,je)]),_:1},8,["show","title"])],64)}}},oe=L(Oe,[["__scopeId","data-v-f2bd2471"]]),Pe={__name:"FormTrips",props:G({modelValue:Object,defaultTrips:Array},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(o){const e=o,l=Y(o,"modelValue"),g=ne(),f=O(()=>g.getters.formOptions),t=O(()=>{const h=[];return f.value.trips.forEach(n=>{n.sessions.forEach(u=>{h.push({...u,trip:n.id})})}),h}),v=O(()=>{const h=[];return t.value.forEach(n=>{!n.available&&!e.defaultTrips.includes(n.id)&&h.push(n.id)}),h}),a=O(()=>{const h=[],n=[];t.value.forEach(i=>{l.value.includes(i.id)&&(h.push({day:i.date,start:i.start,end:i.end}),n.push(i.trip))});const u=[];return v.value.forEach(i=>{u.push(i)}),t.value.forEach(i=>{const j=h.find(V=>V.day===i.date&&V.start<i.end&&V.end>i.start);(n.includes(i.trip)||j!==void 0)&&!l.value.includes(i.id)&&u.push(i.id)}),u});return(h,n)=>(p(),y(F,null,[n[2]||(n[2]=s("p",{style:{"font-size":"1.3em","margin-top":"-1rem"}},"Mi mendas la jenajn ekskursojn:",-1)),n[3]||(n[3]=s("h5",null,"Tuttagaj ekskursoj:",-1)),(p(!0),y(F,null,W(f.value.trips.filter(u=>u.fullDay),u=>(p(),R(oe,{key:u.id,modelValue:l.value,"onUpdate:modelValue":n[0]||(n[0]=i=>l.value=i),trip:u,"full-trips":v.value,"disabled-trips":a.value},null,8,["modelValue","trip","full-trips","disabled-trips"]))),128)),n[4]||(n[4]=s("h5",null,"Duontagaj ekskursoj:",-1)),(p(!0),y(F,null,W(f.value.trips.filter(u=>!u.fullDay),u=>(p(),R(oe,{key:u.id,modelValue:l.value,"onUpdate:modelValue":n[1]||(n[1]=i=>l.value=i),trip:u,"full-trips":v.value,"disabled-trips":a.value},null,8,["modelValue","trip","full-trips","disabled-trips"]))),128))],64))}},Te=L(Pe,[["__scopeId","data-v-4d67232d"]]);function Ce(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var K={exports:{}},De=K.exports,le;function we(){return le||(le=1,function(o,e){(function(l,g){o.exports=g()})(De,function(){return function l(g,f,t){var v=window,a="application/octet-stream",h=t||a,n=g,u=!f&&!t&&n,i=document.createElement("a"),j=function(C){return String(C)},V=v.Blob||v.MozBlob||v.WebKitBlob||j,U=f||"download",w,T;if(V=V.call?V.bind(v):Blob,String(this)==="true"&&(n=[n,h],h=n[0],n=n[1]),u&&u.length<2048&&(U=u.split("/").pop().split("?")[0],i.href=u,i.href.indexOf(u)!==-1)){var x=new XMLHttpRequest;return x.open("GET",u,!0),x.responseType="blob",x.onload=function(C){l(C.target.response,U,a)},setTimeout(function(){x.send()},0),x}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(n))if(n.length>1024*1024*1.999&&V!==j)n=H(n),h=n.type||a;else return navigator.msSaveBlob?navigator.msSaveBlob(H(n),U):N(n);else if(/([\x80-\xff])/.test(n)){var B=0,A=new Uint8Array(n.length),Q=A.length;for(B;B<Q;++B)A[B]=n.charCodeAt(B);n=new V([A],{type:h})}w=n instanceof V?n:new V([n],{type:h});function H(C){var I=C.split(/[:;,]/),S=I[1],k=I[2]=="base64"?atob:decodeURIComponent,d=k(I.pop()),M=d.length,E=0,D=new Uint8Array(M);for(E;E<M;++E)D[E]=d.charCodeAt(E);return new V([D],{type:S})}function N(C,I){if("download"in i)return i.href=C,i.setAttribute("download",U),i.className="download-js-link",i.innerHTML="downloading...",i.style.display="none",document.body.appendChild(i),setTimeout(function(){i.click(),document.body.removeChild(i),I===!0&&setTimeout(function(){v.URL.revokeObjectURL(i.href)},250)},66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(C)&&(C="data:"+C.replace(/^data:([\w\/\-\+]+)/,a)),window.open(C)||confirm(`Displaying New Document

Use Save As... to download, then click back to return to this page.`)&&(location.href=C),!0;var S=document.createElement("iframe");document.body.appendChild(S),!I&&/^data:/.test(C)&&(C="data:"+C.replace(/^data:([\w\/\-\+]+)/,a)),S.src=C,setTimeout(function(){document.body.removeChild(S)},333)}if(navigator.msSaveBlob)return navigator.msSaveBlob(w,U);if(v.URL)N(v.URL.createObjectURL(w),!0);else{if(typeof w=="string"||w.constructor===j)try{return N("data:"+h+";base64,"+v.btoa(w))}catch{return N("data:"+h+","+encodeURIComponent(w))}T=new FileReader,T.onload=function(C){N(this.result)},T.readAsDataURL(w)}return!0}})}(K)),K.exports}var Re=we();const Ue=Ce(Re),Fe={name:"FormInvitation",components:{SlideTransition:q,NFormItemGi:ge},props:{defaultCountry:{type:String,default:null},defaultName:{type:String,default:null},defaultBirthdate:{type:String,default:null}},data(){return{invitationNeeded:!1,passportNumber:"",passportValidFrom:null,passportValidTo:null,birthDate:null,country:"",loading:!1}},computed:{...Z(["countries"]),countryOptions(){return Object.keys(this.countries).map(o=>({value:o,label:this.flagEmoji(o)+" "+this.countries[o].name}))},canSubmit(){return this.passportNumber&&this.passportValidFrom&&this.passportValidTo&&this.birthDate&&this.country}},methods:{download(){this.loading=!0,be.post("/invitation",{id:this.$route.params.id,passportNumber:this.passportNumber,passportValidFrom:this.passportValidFrom,passportValidTo:this.passportValidTo,birthDate:this.birthDate,country:this.country},{responseType:"blob"}).then(o=>{Ue(o.data,`Invitletero ${this.defaultName}.pdf`)}).finally(()=>{this.loading=!1})}},created(){this.country=this.defaultCountry,this.defaultBirthdate&&(this.birthDate=this.defaultBirthdate)}},Ie={style:{"margin-bottom":"2.5rem"}},Be={style:{"text-align":"center","padding-top":"2rem"}};function Ne(o,e,l,g,f,t){const v=b("n-checkbox"),a=b("n-form-item"),h=b("n-input"),n=b("n-form-item-gi"),u=b("n-date-picker"),i=b("n-select"),j=b("n-grid"),V=b("n-button"),U=b("n-card"),w=b("slide-transition");return p(),y("div",Ie,[r(a,{"label-placement":"left","show-feedback":!1},{default:m(()=>[r(v,{checked:f.invitationNeeded,"onUpdate:checked":e[0]||(e[0]=T=>f.invitationNeeded=T),id:"invitationNeeded"},{default:m(()=>e[6]||(e[6]=[_(" Mi bezonas invitleteron por vizo ")])),_:1},8,["checked"])]),_:1}),r(w,null,{default:m(()=>[f.invitationNeeded?(p(),R(U,{key:0,class:"custom-card",title:"Datumoj por la invitilo"},{default:m(()=>[r(j,{"x-gap":"12","y-gap":"16",cols:"1 m:2",responsive:"screen"},{default:m(()=>[r(n,{label:"Nomo de la invitato",feedback:"Se via nomo ne estas skribita ĝuste tiel en via pasporto, bonvolu kontakti la Kongresan Fakon per kongresoj@co.uea.org."},{default:m(()=>[r(h,{id:"invitationName",value:l.defaultName,disabled:""},null,8,["value"])]),_:1}),r(n,{label:"Pasporta numero","show-feedback":!1},{default:m(()=>[r(h,{id:"invitationName",value:f.passportNumber,"onUpdate:value":e[1]||(e[1]=T=>f.passportNumber=T)},null,8,["value"])]),_:1}),r(n,{label:"La pasporto validas ekde","show-feedback":!1},{default:m(()=>[r(u,{"formatted-value":f.passportValidFrom,"onUpdate:formattedValue":e[2]||(e[2]=T=>f.passportValidFrom=T),id:"passportValidFrom",type:"date","value-format":"yyyy-MM-dd"},null,8,["formatted-value"])]),_:1}),r(n,{label:"La pasporto validas ĝis","show-feedback":!1},{default:m(()=>[r(u,{"formatted-value":f.passportValidTo,"onUpdate:formattedValue":e[3]||(e[3]=T=>f.passportValidTo=T),id:"passportValidTo",type:"date","value-format":"yyyy-MM-dd"},null,8,["formatted-value"])]),_:1}),r(n,{label:"Naskiĝdato","show-feedback":!1},{default:m(()=>[r(u,{"formatted-value":f.birthDate,"onUpdate:formattedValue":e[4]||(e[4]=T=>f.birthDate=T),id:"birthDate",type:"date","value-format":"yyyy-MM-dd",disabled:l.defaultBirthdate},null,8,["formatted-value","disabled"])]),_:1}),r(n,{label:"Civitaneco",feedback:"Bonvolu kontroli kaj korekti, se la loĝlando ne kongruas kun la civitaneco indikita en la pasporto."},{default:m(()=>[r(i,{value:f.country,"onUpdate:value":e[5]||(e[5]=T=>f.country=T),id:"invitation_country",options:t.countryOptions,filterable:""},null,8,["value","options"])]),_:1})]),_:1}),s("div",Be,[r(V,{type:"info",onClick:t.download,disabled:!t.canSubmit,loading:f.loading},{default:m(()=>e[7]||(e[7]=[_(" Elŝuti la invitilon ")])),_:1},8,["onClick","disabled","loading"])])]),_:1})):P("",!0)]),_:1})])}const Se=L(Fe,[["render",Ne]]),Me={key:0},Ee={key:0},qe={__name:"FormHotels",props:G({modelValue:Object,defaultHotel:String,defaultRoom:String,defaultParking:Boolean},{modelValue:{},modelModifiers:{}}),emits:G(["update:modelValue"],["update:modelValue"]),setup(o,{emit:e}){const l=o,g=z(!0),f=ne(),t=O(()=>f.getters.formOptions),v=O(()=>f.getters.editMode),a=Y(o,"modelValue"),h=O(()=>{const k=[{value:"",label:"Mi ne mendas hotelon"}];return Object.values(t.value.hotels).forEach(d=>{const M={value:d.id,label:`${d.id}: ${d.name}`,description:d.description};u.value.includes(d.id)&&(M.label+=' <span style="color: #ff2626">(plena!)</span>'),k.push(M)}),k}),n=O(()=>{const k=[];return Object.keys(i.value).forEach(d=>{!i.value[d].available&&d!==l.defaultRoom&&k.push(d)}),k}),u=O(()=>Object.values(t.value.hotels).filter(k=>k.id!==l.defaultHotel&&Object.values(k.rooms).find(d=>d.available)===void 0).map(k=>k.id)),i=O(()=>j.value.rooms),j=O(()=>a.value.hotelo?t.value.hotels[a.value.hotelo]:null),V=O(()=>j.value&&a.value.hotelo_cxambro?j.value.rooms[a.value.hotelo_cxambro]:null),U=O(()=>{const k={};return Object.keys(i.value).forEach(d=>{k[d]=`${i.value[d].roomname} – ${i.value[d].price} €`,i.value[d].people>1&&(k[d]+=" p.p."),n.value.includes(d)&&(k[d]+=' <span style="color: #ff2626">(plena!)</span>')}),k}),w=O(()=>a.value.hotelo_cxefmendanto!==""),T=O(()=>V.value&&(!j.value.payForRoom&&V.value.people>1||j.value.payForRoom&&(V.value.people>2||V.value.people==2&&!g.value))),x=O(()=>T.value&&j.value.payForRoom),B=O(()=>x.value?null:"Mi volas loĝi kun"),A=O(()=>j.value.payForRoom?"La indikita prezo estas por 1 nokto por 1 persono, sed vi kiel mendanto pagos por la tuta ĉambro.":V.value&&V.value.people>1?"La indikita prezo estas por 1 persono, ne por tuta ĉambro.":"La indikita prezo estas por 1 persono."),Q=O(()=>a.value.hotelo?H.value[a.value.hotelo]:!1),H=O(()=>{const k={};return Object.values(t.value.hotels).forEach(d=>{k[d.id]=d.parking}),v.value&&l.defaultHotel&&l.defaultParking&&(k[l.defaultHotel]=!0),k});function N(k){g.value=k.valid}function C(k){(!(k in t.value.hotels)||!(a.value.hotelo_cxambro in t.value.hotels[k].rooms))&&(a.value.hotelo_cxambro=null),(!(k in t.value.hotels)||!H.value[k])&&(a.value.parkloko=!1)}g.value=a.value.hotelo_kunlogxanto!=="",a.value.hotelo_de===""&&(a.value.hotelo_de=t.value.congressStart),a.value.hotelo_gxis===""&&(a.value.hotelo_gxis=t.value.congressEnd);const I=O(()=>{if(a.value.hotelo_de){let k=new Date(a.value.hotelo_de);return k.setDate(k.getDate()+j.value.minNights),k.toISOString().split("T")[0]}return j.value.start}),S=O(()=>{if(a.value.hotelo_gxis){let k=new Date(a.value.hotelo_gxis);return k.setDate(k.getDate()-j.value.minNights),k.toISOString().split("T")[0]}return j.value.end});return(k,d)=>{const M=b("n-alert"),E=b("n-space");return w.value?(p(),R(M,{key:0,title:"Jam mendita",type:"info",style:{"margin-bottom":"2rem"}},{default:m(()=>[_(c(a.value.hotelo_cxefmendanto_nomo)+" jam mendis loĝadon por vi. ",1)]),_:1})):(p(),y(F,{key:1},[r(J,{modelValue:a.value.hotelo,"onUpdate:modelValue":[d[0]||(d[0]=D=>a.value.hotelo=D),C],"field-name":"hotelo",options:h.value,"disabled-options":u.value,vertical:""},null,8,["modelValue","options","disabled-options"]),r(q,null,{default:m(()=>[a.value.hotelo?(p(),y("div",Me,[r(E,null,{default:m(()=>[r(te,{modelValue:a.value.hotelo_de,"onUpdate:modelValue":d[1]||(d[1]=D=>a.value.hotelo_de=D),"field-name":"hotelo_de",min:j.value.start,max:S.value},null,8,["modelValue","min","max"]),r(te,{modelValue:a.value.hotelo_gxis,"onUpdate:modelValue":d[2]||(d[2]=D=>a.value.hotelo_gxis=D),"field-name":"hotelo_gxis",min:I.value,max:j.value.end},null,8,["modelValue","min","max"])]),_:1}),r(J,{modelValue:a.value.hotelo_cxambro,"onUpdate:modelValue":d[3]||(d[3]=D=>a.value.hotelo_cxambro=D),"field-name":"hotelo_cxambro",label:"Tipo de ĉambro",options:U.value,"disabled-options":n.value,vertical:"",required:"",style:{"margin-bottom":"1.5rem"},help:A.value},null,8,["modelValue","options","disabled-options","help"]),r(X,{modelValue:a.value.hotelo_alternativo,"onUpdate:modelValue":d[4]||(d[4]=D=>a.value.hotelo_alternativo=D),"field-name":"hotelo_alternativo"},null,8,["modelValue"]),r(q,null,{default:m(()=>[V.value&&j.value.payForRoom&&V.value.people===2?(p(),y("div",Ee,[r(ae,{modelValue:a.value.hotelo_kunlogxanto,"onUpdate:modelValue":d[5]||(d[5]=D=>a.value.hotelo_kunlogxanto=D),"field-name":"hotelo_kunlogxanto","current-user":a.value.uea_kodo,mode:"hotelo",help:"Se vi ne konas la UEA-kodon aŭ la persono ankoraŭ ne estas kongresano, bonvolu indiki la nomon en la sekva kampo.",onCodeChecked:N},null,8,["modelValue","current-user"])])):P("",!0)]),_:1}),r(q,null,{default:m(()=>[T.value?(p(),R(X,{key:0,style:{"margin-top":"1rem"},modelValue:a.value.hotelo_kunlogxanto2,"onUpdate:modelValue":d[6]||(d[6]=D=>a.value.hotelo_kunlogxanto2=D),"field-name":"hotelo_kunlogxanto2","default-label":B.value,required:x.value},null,8,["modelValue","default-label","required"])):P("",!0)]),_:1}),r(q,null,{default:m(()=>[Q.value?(p(),R(re,{key:0,modelValue:a.value.parkloko,"onUpdate:modelValue":d[7]||(d[7]=D=>a.value.parkloko=D),"field-name":"parkloko"},null,8,["modelValue"])):P("",!0)]),_:1})])):P("",!0)]),_:1})],64))}}},Le={name:"FormPrePostTrips",components:{TextInput:X,UeaCodeInput:ae,SlideTransition:q,RadioInput:J},props:{modelValue:Object,type:String,defaultTrip:String,defaultRoom:String},emits:["update:modelValue"],data(){return{codeValid:!1}},computed:{...Z(["formOptions"]),form:{get(){return this.modelValue},set(o){this.$emit("update:modelValue",o)}},trips(){const o={"":"Mi ne mendas "+(this.type==="ak"?"antaŭ":"post")+"kongresan ekskurson"};return Object.values(this.formOptions.preposttrips).filter(e=>e.type===this.type).forEach(e=>{const l=Object.keys(e.rooms).length===1?e.rooms[""].price+" €":"",g=e.id[0]+e.id[2];o[e.id]=`${g}: ${e.name}`,l!==""&&(o[e.id]+=` – ${l}`),this.fullTrips.includes(e.id)&&(o[e.id]+=' <span style="color: #ff2626">(plena!)</span>')}),o},fullTrips(){return Object.values(this.formOptions.preposttrips).filter(o=>o.type===this.type&&o.id!==this.defaultTrip&&Object.values(o.rooms).find(e=>e.available)===void 0).map(o=>o.id)},fullRooms(){const o=[];return Object.keys(this.rooms).forEach(e=>{!this.rooms[e].available&&e!==this.defaultRoom&&o.push(e)}),o},rooms(){return this.formOptions.preposttrips[this.form[this.type]].rooms},roomOptions(){const o={};return Object.keys(this.rooms).forEach(e=>{o[e]=`${this.rooms[e].roomname} – ${this.rooms[e].price} €`,this.fullRooms.includes(e)&&(o[e]+=' <span style="color: #ff2626">(plena!)</span>')}),o},alreadyBooked(){return this.form[this.type+"_cxefmendanto"]!==""},pickedRoom(){return!this.form[this.type]||!this.form[this.type+"_cxambro"]?null:this.formOptions.preposttrips[this.form[this.type]].rooms[this.form[this.type+"_cxambro"]]},showRoommate2(){return this.pickedRoom&&(this.pickedRoom.people>2||this.pickedRoom.people==2&&!this.codeValid)}},methods:{ueaCodeResult(o){this.codeValid=o.valid}}},Ae={key:0},He={key:0};function ze(o,e,l,g,f,t){const v=b("n-alert"),a=b("radio-input"),h=b("uea-code-input"),n=b("text-input"),u=b("slide-transition");return t.alreadyBooked?(p(),R(v,{key:0,title:"Jam mendita",type:"info",style:{"margin-bottom":"2rem"}},{default:m(()=>[_(c(t.form[l.type+"_cxefmendanto_nomo"])+" jam mendis "+c(l.type==="ak"?"antaŭ":"post")+"kongreson por vi. ",1)]),_:1})):(p(),y(F,{key:1},[r(a,{modelValue:t.form[l.type],"onUpdate:modelValue":e[0]||(e[0]=i=>t.form[l.type]=i),"field-name":l.type,options:t.trips,"disabled-options":t.fullTrips,vertical:""},null,8,["modelValue","field-name","options","disabled-options"]),r(u,null,{default:m(()=>[t.form[l.type]&&Object.keys(t.rooms).length>1?(p(),y("div",Ae,[r(a,{modelValue:t.form[l.type+"_cxambro"],"onUpdate:modelValue":e[1]||(e[1]=i=>t.form[l.type+"_cxambro"]=i),"field-name":l.type+"_cxambro",options:t.roomOptions,"disabled-options":t.fullRooms,vertical:"",required:"",style:{"margin-bottom":"1.5rem"},help:"La indikita prezo estas por 1 persono, sed vi kiel mendanto pagos por la tuta ĉambro."},null,8,["modelValue","field-name","options","disabled-options"]),r(u,null,{default:m(()=>[t.pickedRoom&&t.pickedRoom.people===2?(p(),y("div",He,[r(h,{modelValue:t.form[l.type+"_kunlogxanto"],"onUpdate:modelValue":e[2]||(e[2]=i=>t.form[l.type+"_kunlogxanto"]=i),"field-name":l.type+"_kunlogxanto","current-user":t.form.uea_kodo,mode:l.type,help:"Se vi ne konas la UEA-kodon aŭ la persono ankoraŭ ne estas kongresano, bonvolu indiki la nomon en la sekva kampo.",onCodeChecked:t.ueaCodeResult},null,8,["modelValue","field-name","current-user","mode","onCodeChecked"]),r(u,null,{default:m(()=>[t.showRoommate2?(p(),R(n,{key:0,style:{"margin-top":"1rem"},modelValue:t.form[l.type+"_kunlogxanto2"],"onUpdate:modelValue":e[3]||(e[3]=i=>t.form[l.type+"_kunlogxanto2"]=i),"field-name":l.type+"_kunlogxanto2",required:""},null,8,["modelValue","field-name"])):P("",!0)]),_:1})])):P("",!0)]),_:1})])):P("",!0)]),_:1})],64))}const Ge=L(Le,[["render",ze]]),Ke={name:"FormBookingPrice",props:{form:Object},computed:{...Z(["formOptions","prices"]),banquetPrice(){return this.form.bankedo===this.formOptions.boolValues.yes?this.prices.banquet:0},tripsWithPrices(){const o={};return this.formOptions.trips.forEach(e=>{e.sessions.forEach(l=>{this.form.ekskursoj.includes(l.id)&&(o[l.fullName]=e.price)})}),o},tripsPrice(){return Object.values(this.tripsWithPrices).reduce((o,e)=>o+e,0)},hotelName(){return this.formOptions.hotels[this.form.hotelo].name},peopleInRoom(){return this.formOptions.hotels[this.form.hotelo].payForRoom?this.formOptions.hotels[this.form.hotelo].rooms[this.form.hotelo_cxambro].people:1},roomPrice(){return this.formOptions.hotels[this.form.hotelo].rooms[this.form.hotelo_cxambro].price},nights(){return this.daysBetweenDates(this.form.hotelo_de,this.form.hotelo_gxis)},hotelPrice(){return this.form.hotelo_cxefmendanto!==""||!this.form.hotelo||!this.form.hotelo_cxambro||!this.form.hotelo_de||!this.form.hotelo_gxis?0:this.roomPrice*this.peopleInRoom*this.nights},preCongressName(){return this.formOptions.preposttrips[this.form.ak].name},preCongressPriceForOne(){const o=this.formOptions.preposttrips[this.form.ak].rooms;return this.form.ak_cxambro in o?o[this.form.ak_cxambro].price:null},preCongressPeople(){return this.formOptions.preposttrips[this.form.ak].rooms[this.form.ak_cxambro].people},preCongressPrice(){return this.form.ak_cxefmendanto!==""||!this.form.ak||this.preCongressPriceForOne===null?0:this.preCongressPriceForOne*this.preCongressPeople},postCongressName(){return this.formOptions.preposttrips[this.form.pk].name},postCongressPriceForOne(){const o=this.formOptions.preposttrips[this.form.pk].rooms;return this.form.pk_cxambro in o?o[this.form.pk_cxambro].price:null},postCongressPeople(){return this.formOptions.preposttrips[this.form.pk].rooms[this.form.pk_cxambro].people},postCongressPrice(){return this.form.pk_cxefmendanto!==""||!this.form.pk||this.postCongressPriceForOne===null?0:this.postCongressPriceForOne*this.postCongressPeople},transportationPrice(){return"transporta_bileto"in this.form&&this.form.transporta_bileto?this.prices.transportation:0},sum(){return Math.max(0,this.banquetPrice+this.tripsPrice+this.hotelPrice+this.preCongressPrice+this.postCongressPrice+this.transportationPrice-this.form.sumo_rabato_mendo+this.form.sumo_malrabato_mendo)}},methods:{j(o){return o>1?"j":""},daysBetweenDates(o,e){const g=new Date(o),f=new Date(e);return Math.round(Math.abs((g-f)/864e5))}}},We={key:0},Je={key:1},Xe={key:2},Ye={key:3},Ze={key:4},Qe={key:5},$e={key:6},et={key:7},tt={class:"sum"},ot={class:"sum"},lt={class:"sum"};function nt(o,e,l,g,f,t){const v=b("n-p");return p(),y(F,null,[s("table",null,[s("tbody",null,[t.banquetPrice>0?(p(),y("tr",We,[e[0]||(e[0]=s("td",null,"Bankedo",-1)),e[1]||(e[1]=s("td",null,null,-1)),s("td",null,c(t.banquetPrice)+" €",1)])):P("",!0),t.hotelPrice>0?(p(),y("tr",Je,[e[3]||(e[3]=s("td",null,"Hotelo",-1)),s("td",null,[_(c(t.hotelName),1),e[2]||(e[2]=s("br",null,null,-1)),_(" "+c(t.roomPrice)+" € × "+c(t.peopleInRoom)+" persono"+c(t.j(t.peopleInRoom))+" × "+c(t.nights)+" nokto"+c(t.j(t.nights)),1)]),s("td",null,c(t.hotelPrice)+" €",1)])):P("",!0),t.preCongressPrice>0?(p(),y("tr",Xe,[e[5]||(e[5]=s("td",null,"Antaŭkongresa ekskurso",-1)),s("td",null,[_(c(t.preCongressName),1),e[4]||(e[4]=s("br",null,null,-1)),_(" "+c(t.preCongressPriceForOne)+" € × "+c(t.preCongressPeople)+" persono"+c(t.j(t.preCongressPeople)),1)]),s("td",null,c(t.preCongressPrice)+" €",1)])):P("",!0),t.postCongressPrice>0?(p(),y("tr",Ye,[e[7]||(e[7]=s("td",null,"Postkongresa ekskurso",-1)),s("td",null,[_(c(t.postCongressName),1),e[6]||(e[6]=s("br",null,null,-1)),_(" "+c(t.postCongressPriceForOne)+" € × "+c(t.postCongressPeople)+" persono"+c(t.j(t.postCongressPeople)),1)]),s("td",null,c(t.postCongressPrice)+" €",1)])):P("",!0),t.tripsPrice>0?(p(),y("tr",Ze,[e[9]||(e[9]=s("td",null,"Ekskursoj",-1)),s("td",null,[s("ul",null,[(p(!0),y(F,null,W(t.tripsWithPrices,(a,h,n)=>(p(),y("li",{key:n},[_(c(h),1),e[8]||(e[8]=s("br",null,null,-1)),_(c(a)+" €",1)]))),128))])]),s("td",null,c(t.tripsPrice)+" €",1)])):P("",!0),t.transportationPrice>0?(p(),y("tr",Qe,[e[10]||(e[10]=s("td",null,"Semajna bileto por publika transporto",-1)),e[11]||(e[11]=s("td",null,null,-1)),s("td",null,c(t.transportationPrice)+" €",1)])):P("",!0),l.form.sumo_rabato_mendo>0?(p(),y("tr",$e,[e[12]||(e[12]=s("td",null,"Rabato por la mendo",-1)),e[13]||(e[13]=s("td",null,null,-1)),s("td",null,c(l.form.sumo_rabato_mendo*-1)+" €",1)])):P("",!0),l.form.sumo_malrabato_mendo>0?(p(),y("tr",et,[e[14]||(e[14]=s("td",null,"Krompago por la mendo",-1)),e[15]||(e[15]=s("td",null,null,-1)),s("td",null,c(l.form.sumo_malrabato_mendo)+" €",1)])):P("",!0),s("tr",tt,[e[16]||(e[16]=s("td",null,"Sumo",-1)),e[17]||(e[17]=s("td",null,null,-1)),s("td",null,c(t.sum)+" €",1)]),l.form.sumo_mendo_pagita?(p(),y(F,{key:8},[s("tr",ot,[e[18]||(e[18]=s("td",null,"Jam pagita sumo",-1)),e[19]||(e[19]=s("td",null,null,-1)),s("td",null,c(l.form.sumo_mendo_pagita)+" €",1)]),s("tr",lt,[s("td",null,c(l.form.sumo_mendo_pagita>t.sum?"Repagota":"Ankoraŭ pagenda")+" sumo",1),e[20]||(e[20]=s("td",null,null,-1)),s("td",null,c(t.sum-l.form.sumo_mendo_pagita)+" €",1)])],64)):P("",!0)])]),t.sum>0?(p(),R(v,{key:0},{default:m(()=>e[21]||(e[21]=[_("Detalojn pri pagmanieroj vi ricevos retpoŝte post kontrolo de via mendo.")])),_:1})):P("",!0)],64)}const at=L(Ke,[["render",nt],["__scopeId","data-v-aa65a22f"]]),rt={components:{CheckboxInput:re,FormBookingPrice:at,FormInvitation:Se,FormTrips:Te,TextInput:X,FormHotels:qe,FormPrePostTrips:Ge,SlideTransition:q,RadioInput:J},props:{modelValue:{type:Object,required:!0},defaultData:{type:Object,required:!0},foodTypeRequired:{type:Boolean,required:!0},foodTypeCompanionRequired:{type:Boolean,required:!0}},emits:["update:modelValue"],name:"FormBooking",computed:{...Z(["formOptions"]),form:{get(){return this.modelValue},set(o){this.$emit("update:modelValue",o)}}},mounted(){this.scrollTo("mendilo",12)}},st={key:0,style:{"margin-top":"2rem"}};function it(o,e,l,g,f,t){const v=b("n-h4"),a=b("form-invitation"),h=b("router-link"),n=b("n-p"),u=b("radio-input"),i=b("slide-transition"),j=b("form-hotels"),V=b("form-pre-post-trips"),U=b("form-trips"),w=b("text-input"),T=b("form-booking-price");return p(),y(F,null,[r(v,null,{default:m(()=>e[9]||(e[9]=[_("Invitilo")])),_:1}),r(a,{"default-name":(l.defaultData.persona_nomo+" "+l.defaultData.familia_nomo).trim(),"default-country":l.defaultData.lando,"default-birthdate":l.defaultData.naskigxdato},null,8,["default-name","default-country","default-birthdate"]),r(v,null,{default:m(()=>e[10]||(e[10]=[_("Bankedo")])),_:1}),r(n,null,{default:m(()=>[e[12]||(e[12]=_(" La ĉi-jara bankedo havos formon de bufedo, kie oni mem iros elekti kaj surtelerigi manĝojn laŭ sia prefero.")),e[13]||(e[13]=s("br",null,null,-1)),e[14]||(e[14]=_(" La bufedo enhavos diversajn pladojn, kiuj taŭgos por viandmanĝantoj, vegetaranoj kaj veganoj. Pli da informoj en la ")),r(h,{to:{name:"duaBulteno"}},{default:m(()=>e[11]||(e[11]=[_("Dua Bulteno")])),_:1}),e[15]||(e[15]=_(". "))]),_:1}),r(u,{modelValue:t.form.bankedo,"onUpdate:modelValue":e[0]||(e[0]=x=>t.form.bankedo=x),"field-name":"bankedo",options:o.formOptions.banquet,vertical:""},null,8,["modelValue","options"]),r(i,null,{default:m(()=>[t.form.bankedo===o.formOptions.boolValues.yes?(p(),R(u,{key:0,modelValue:t.form.bankedo_tipo,"onUpdate:modelValue":e[1]||(e[1]=x=>t.form.bankedo_tipo=x),"field-name":"bankedo_tipo",options:["kunviande","vegetare","vegane"],vertical:"",required:"",help:"Via elekto helpos al ni plani la ĝustajn kvantojn de manĝaĵoj laŭ la manĝotipoj."},null,8,["modelValue"])):P("",!0)]),_:1}),r(v,null,{default:m(()=>e[16]||(e[16]=[_("Hotelo")])),_:1}),r(j,{modelValue:t.form,"onUpdate:modelValue":e[2]||(e[2]=x=>t.form=x),"default-hotel":l.defaultData.hotelo,"default-room":l.defaultData.hotelo_cxambro,"default-parking":l.defaultData.parkloko},null,8,["modelValue","default-hotel","default-room","default-parking"]),r(v,null,{default:m(()=>e[17]||(e[17]=[_("Antaŭkongresa ekskurso")])),_:1}),r(V,{modelValue:t.form,"onUpdate:modelValue":e[3]||(e[3]=x=>t.form=x),"default-trip":l.defaultData.ak,"default-room":l.defaultData.ak_cxambro,type:"ak"},null,8,["modelValue","default-trip","default-room"]),r(v,null,{default:m(()=>e[18]||(e[18]=[_("Postkongresa ekskurso")])),_:1}),r(V,{modelValue:t.form,"onUpdate:modelValue":e[4]||(e[4]=x=>t.form=x),"default-trip":l.defaultData.pk,"default-room":l.defaultData.pk_cxambro,type:"pk"},null,8,["modelValue","default-trip","default-room"]),r(v,null,{default:m(()=>e[19]||(e[19]=[_("Ekskursoj")])),_:1}),r(U,{"default-trips":l.defaultData.ekskursoj,modelValue:t.form.ekskursoj,"onUpdate:modelValue":e[5]||(e[5]=x=>t.form.ekskursoj=x)},null,8,["default-trips","modelValue"]),r(i,null,{default:m(()=>[l.foodTypeRequired?(p(),y("div",st,[r(v,null,{default:m(()=>e[20]||(e[20]=[_("Manĝotipo dum ekskursoj")])),_:1}),r(u,{modelValue:t.form.mangxotipo,"onUpdate:modelValue":e[6]||(e[6]=x=>t.form.mangxotipo=x),"field-name":"mangxotipo",options:o.formOptions.foodtypes,required:!0,label:"Bonvolu elekti manĝotipon, kiun vi mendas por la tuttagaj, antaŭ- kaj/aŭ postkongresaj ekskursoj."},null,8,["modelValue","options"]),l.foodTypeCompanionRequired?(p(),R(w,{key:0,style:{"margin-top":"1rem"},modelValue:t.form.mangxotipo_kunlogxanto,"onUpdate:modelValue":e[7]||(e[7]=x=>t.form.mangxotipo_kunlogxanto=x),"field-name":"mangxotipo_kunlogxanto",required:""},null,8,["modelValue"])):P("",!0)])):P("",!0)]),_:1}),r(v,null,{default:m(()=>e[21]||(e[21]=[_("Komentoj")])),_:1}),r(w,{modelValue:t.form.komento_mendo,"onUpdate:modelValue":e[8]||(e[8]=x=>t.form.komento_mendo=x),"field-name":"komento_mendo",type:"textarea"},null,8,["modelValue"]),r(v,null,{default:m(()=>e[22]||(e[22]=[_("Prezo de la mendo")])),_:1}),r(T,{form:t.form},null,8,["form"])],64)}const dt=L(rt,[["render",it]]);export{dt as default};

import{d as re,r as z,h as Z,k as $,f as se,N as ie,g as ue,a as de,b as me,c as pe,m as G,u as X,e as O,i as b,o as p,j as R,w as m,l as r,n as y,F as U,p as K,q as s,_ as L,s as g,t as k,v as fe,x as ve,I as ce,y as T,z as te,S as q,A as Q,B as ke,R as W,D as ee,C as J,U as le,E as ne}from"./main-embedded-e195fb01.js";const be=Object.assign(Object.assign({},me),pe),he=re({__GRID_ITEM__:!0,name:"FormItemGridItem",alias:["FormItemGi"],props:be,setup(){const t=z(null);return{formItemInstRef:t,validate:(..._)=>{const{value:f}=t;if(f)return f.validate(..._)},restoreValidation:()=>{const{value:_}=t;_&&_.restoreValidation()}}},render(){return Z(de,$(this.$.vnode.props||{},ue),{default:()=>{const t=$(this.$props,se);return Z(ie,Object.assign({ref:"formItemInstRef"},t),this.$slots)}})}}),_e=["innerHTML"],ge={__name:"FormTripsSessionsCheckboxes",props:G({sessions:Array,fullTrips:Array,disabledTrips:Array},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=t,l=X(t,"modelValue"),_=O(()=>e.sessions.map(f=>{let o=f.name;return e.fullTrips.includes(f.id)&&(o+=' <span style="color: #ff2626">(plena!)</span>'),{...f,name:o}}));return(f,o)=>{const v=b("n-checkbox"),a=b("n-space"),h=b("n-checkbox-group");return p(),R(h,{value:l.value,"onUpdate:value":o[0]||(o[0]=n=>l.value=n),style:{"margin-top":"8px"}},{default:m(()=>[r(a,{vertical:""},{default:m(()=>[(p(!0),y(U,null,K(_.value,n=>(p(),R(v,{key:n.id,value:n.id,disabled:t.disabledTrips.includes(n.id)},{default:m(()=>[s("span",{innerHTML:n.name},null,8,_e)]),_:2},1032,["value","disabled"]))),128))]),_:1})]),_:1},8,["value"])}}};const ye={class:"trip"},Ve={key:0,style:{"margin-top":"2px"}},xe=["innerHTML"],je={__name:"FormTripsTrip",props:G({trip:Array,fullTrips:Array,disabledTrips:Array},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=X(t,"modelValue"),l=z(!1),_=z(""),f=z("");function o(v){_.value=v.id+". "+v.name,f.value=v.description,l.value=!0}return(v,a)=>{const h=b("n-button"),n=b("n-modal");return p(),y(U,null,[s("div",ye,[s("h6",null,[g(k(t.trip.id)+". "+k(t.trip.name)+" – "+k(t.trip.price)+" € ",1),t.trip.description?(p(),R(h,{key:0,text:"",style:{"font-size":"24px"},onClick:a[0]||(a[0]=u=>o(t.trip))},{default:m(()=>[r(fe(ve),{color:"#2050cf"},{default:m(()=>[r(ce)]),_:1})]),_:1})):T("",!0)]),t.trip.subtitle?(p(),y("div",Ve,k(t.trip.subtitle),1)):T("",!0),r(ge,{modelValue:e.value,"onUpdate:modelValue":a[1]||(a[1]=u=>e.value=u),sessions:t.trip.sessions,"full-trips":t.fullTrips,"disabled-trips":t.disabledTrips},null,8,["modelValue","sessions","full-trips","disabled-trips"])]),r(n,{show:l.value,"onUpdate:show":a[2]||(a[2]=u=>l.value=u),preset:"card",style:{"max-width":"900px"},title:_.value,size:"small"},{default:m(()=>[s("div",{innerHTML:f.value},null,8,xe)]),_:1},8,["show","title"])],64)}}},oe=L(je,[["__scopeId","data-v-f2bd2471"]]);const Oe={__name:"FormTrips",props:G({modelValue:Object,defaultTrips:Array},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=t,l=X(t,"modelValue"),_=te(),f=O(()=>_.getters.formOptions),o=O(()=>{const h=[];return f.value.trips.forEach(n=>{n.sessions.forEach(u=>{h.push({...u,trip:n.id})})}),h}),v=O(()=>{const h=[];return o.value.forEach(n=>{!n.available&&!e.defaultTrips.includes(n.id)&&h.push(n.id)}),h}),a=O(()=>{const h=[],n=[];o.value.forEach(i=>{l.value.includes(i.id)&&(h.push({day:i.date,start:i.start,end:i.end}),n.push(i.trip))});const u=[];return v.value.forEach(i=>{u.push(i)}),o.value.forEach(i=>{const j=h.find(V=>V.day===i.date&&V.start<i.end&&V.end>i.start);(n.includes(i.trip)||j!==void 0)&&!l.value.includes(i.id)&&u.push(i.id)}),u});return(h,n)=>(p(),y(U,null,[n[2]||(n[2]=s("p",{style:{"font-size":"1.3em","margin-top":"-1rem"}},"Mi mendas la jenajn ekskursojn:",-1)),n[3]||(n[3]=s("h5",null,"Tuttagaj ekskursoj:",-1)),(p(!0),y(U,null,K(f.value.trips.filter(u=>u.fullDay),u=>(p(),R(oe,{key:u.id,modelValue:l.value,"onUpdate:modelValue":n[0]||(n[0]=i=>l.value=i),trip:u,"full-trips":v.value,"disabled-trips":a.value},null,8,["modelValue","trip","full-trips","disabled-trips"]))),128)),n[4]||(n[4]=s("h5",null,"Duontagaj ekskursoj:",-1)),(p(!0),y(U,null,K(f.value.trips.filter(u=>!u.fullDay),u=>(p(),R(oe,{key:u.id,modelValue:l.value,"onUpdate:modelValue":n[1]||(n[1]=i=>l.value=i),trip:u,"full-trips":v.value,"disabled-trips":a.value},null,8,["modelValue","trip","full-trips","disabled-trips"]))),128))],64))}},Te=L(Oe,[["__scopeId","data-v-4d67232d"]]);var Pe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ce(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ae={exports:{}};(function(t,e){(function(l,_){t.exports=_()})(Pe,function(){return function l(_,f,o){var v=window,a="application/octet-stream",h=o||a,n=_,u=!f&&!o&&n,i=document.createElement("a"),j=function(C){return String(C)},V=v.Blob||v.MozBlob||v.WebKitBlob||j,F=f||"download",D,P;if(V=V.call?V.bind(v):Blob,String(this)==="true"&&(n=[n,h],h=n[0],n=n[1]),u&&u.length<2048&&(F=u.split("/").pop().split("?")[0],i.href=u,i.href.indexOf(u)!==-1)){var x=new XMLHttpRequest;return x.open("GET",u,!0),x.responseType="blob",x.onload=function(C){l(C.target.response,F,a)},setTimeout(function(){x.send()},0),x}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(n))if(n.length>1024*1024*1.999&&V!==j)n=H(n),h=n.type||a;else return navigator.msSaveBlob?navigator.msSaveBlob(H(n),F):N(n);else if(/([\x80-\xff])/.test(n)){var B=0,A=new Uint8Array(n.length),Y=A.length;for(B;B<Y;++B)A[B]=n.charCodeAt(B);n=new V([A],{type:h})}D=n instanceof V?n:new V([n],{type:h});function H(C){var I=C.split(/[:;,]/),S=I[1],c=I[2]=="base64"?atob:decodeURIComponent,d=c(I.pop()),M=d.length,E=0,w=new Uint8Array(M);for(E;E<M;++E)w[E]=d.charCodeAt(E);return new V([w],{type:S})}function N(C,I){if("download"in i)return i.href=C,i.setAttribute("download",F),i.className="download-js-link",i.innerHTML="downloading...",i.style.display="none",document.body.appendChild(i),setTimeout(function(){i.click(),document.body.removeChild(i),I===!0&&setTimeout(function(){v.URL.revokeObjectURL(i.href)},250)},66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(C)&&(C="data:"+C.replace(/^data:([\w\/\-\+]+)/,a)),window.open(C)||confirm(`Displaying New Document

Use Save As... to download, then click back to return to this page.`)&&(location.href=C),!0;var S=document.createElement("iframe");document.body.appendChild(S),!I&&/^data:/.test(C)&&(C="data:"+C.replace(/^data:([\w\/\-\+]+)/,a)),S.src=C,setTimeout(function(){document.body.removeChild(S)},333)}if(navigator.msSaveBlob)return navigator.msSaveBlob(D,F);if(v.URL)N(v.URL.createObjectURL(D),!0);else{if(typeof D=="string"||D.constructor===j)try{return N("data:"+h+";base64,"+v.btoa(D))}catch{return N("data:"+h+","+encodeURIComponent(D))}P=new FileReader,P.onload=function(C){N(this.result)},P.readAsDataURL(D)}return!0}})})(ae);var we=ae.exports;const De=Ce(we),Re={name:"FormInvitation",components:{SlideTransition:q,NFormItemGi:he},props:{defaultCountry:{type:String,default:null},defaultName:{type:String,default:null},defaultBirthdate:{type:String,default:null}},data(){return{invitationNeeded:!1,passportNumber:"",passportValidFrom:null,passportValidTo:null,birthDate:null,country:"",loading:!1}},computed:{...Q(["countries"]),countryOptions(){return Object.keys(this.countries).map(t=>({value:t,label:this.flagEmoji(t)+" "+this.countries[t].name}))},canSubmit(){return this.passportNumber&&this.passportValidFrom&&this.passportValidTo&&this.birthDate&&this.country}},methods:{download(){this.loading=!0,ke.post("/invitation",{id:this.$route.params.id,passportNumber:this.passportNumber,passportValidFrom:this.passportValidFrom,passportValidTo:this.passportValidTo,birthDate:this.birthDate,country:this.country},{responseType:"blob"}).then(t=>{De(t.data,`Invitletero ${this.defaultName}.pdf`)}).finally(()=>{this.loading=!1})}},created(){this.country=this.defaultCountry,this.defaultBirthdate&&(this.birthDate=this.defaultBirthdate)}},Fe={style:{"margin-bottom":"2.5rem"}},Ue={style:{"text-align":"center","padding-top":"2rem"}};function Ie(t,e,l,_,f,o){const v=b("n-checkbox"),a=b("n-form-item"),h=b("n-input"),n=b("n-form-item-gi"),u=b("n-date-picker"),i=b("n-select"),j=b("n-grid"),V=b("n-button"),F=b("n-card"),D=b("slide-transition");return p(),y("div",Fe,[r(a,{"label-placement":"left","show-feedback":!1},{default:m(()=>[r(v,{checked:f.invitationNeeded,"onUpdate:checked":e[0]||(e[0]=P=>f.invitationNeeded=P),id:"invitationNeeded"},{default:m(()=>e[6]||(e[6]=[g(" Mi bezonas invitleteron por vizo ")])),_:1},8,["checked"])]),_:1}),r(D,null,{default:m(()=>[f.invitationNeeded?(p(),R(F,{key:0,class:"custom-card",title:"Datumoj por la invitilo"},{default:m(()=>[r(j,{"x-gap":"12","y-gap":"16",cols:"1 m:2",responsive:"screen"},{default:m(()=>[r(n,{label:"Nomo de la invitato",feedback:"Se via nomo ne estas skribita ĝuste tiel en via pasporto, bonvolu kontakti la Kongresan Fakon per kongresoj@co.uea.org."},{default:m(()=>[r(h,{id:"invitationName",value:l.defaultName,disabled:""},null,8,["value"])]),_:1}),r(n,{label:"Pasporta numero","show-feedback":!1},{default:m(()=>[r(h,{id:"invitationName",value:f.passportNumber,"onUpdate:value":e[1]||(e[1]=P=>f.passportNumber=P)},null,8,["value"])]),_:1}),r(n,{label:"La pasporto validas ekde","show-feedback":!1},{default:m(()=>[r(u,{"formatted-value":f.passportValidFrom,"onUpdate:formattedValue":e[2]||(e[2]=P=>f.passportValidFrom=P),id:"passportValidFrom",type:"date","value-format":"yyyy-MM-dd"},null,8,["formatted-value"])]),_:1}),r(n,{label:"La pasporto validas ĝis","show-feedback":!1},{default:m(()=>[r(u,{"formatted-value":f.passportValidTo,"onUpdate:formattedValue":e[3]||(e[3]=P=>f.passportValidTo=P),id:"passportValidTo",type:"date","value-format":"yyyy-MM-dd"},null,8,["formatted-value"])]),_:1}),r(n,{label:"Naskiĝdato","show-feedback":!1},{default:m(()=>[r(u,{"formatted-value":f.birthDate,"onUpdate:formattedValue":e[4]||(e[4]=P=>f.birthDate=P),id:"birthDate",type:"date","value-format":"yyyy-MM-dd",disabled:l.defaultBirthdate},null,8,["formatted-value","disabled"])]),_:1}),r(n,{label:"Civitaneco",feedback:"Bonvolu kontroli kaj korekti, se la loĝlando ne kongruas kun la civitaneco indikita en la pasporto."},{default:m(()=>[r(i,{value:f.country,"onUpdate:value":e[5]||(e[5]=P=>f.country=P),id:"invitation_country",options:o.countryOptions,filterable:""},null,8,["value","options"])]),_:1})]),_:1}),s("div",Ue,[r(V,{type:"info",onClick:o.download,disabled:!o.canSubmit,loading:f.loading},{default:m(()=>e[7]||(e[7]=[g(" Elŝuti la invitilon ")])),_:1},8,["onClick","disabled","loading"])])]),_:1})):T("",!0)]),_:1})])}const Be=L(Re,[["render",Ie]]),Ne={key:0},Se={key:0},Me={__name:"FormHotels",props:G({modelValue:Object,defaultHotel:String,defaultRoom:String,defaultParking:Boolean},{modelValue:{},modelModifiers:{}}),emits:G(["update:modelValue"],["update:modelValue"]),setup(t,{emit:e}){const l=t,_=z(!0),f=te(),o=O(()=>f.getters.formOptions),v=O(()=>f.getters.editMode),a=X(t,"modelValue"),h=O(()=>{const c=[{value:"",label:"Mi ne mendas hotelon"}];return Object.values(o.value.hotels).forEach(d=>{const M={value:d.id,label:`${d.id}: ${d.name}`,description:d.description};u.value.includes(d.id)&&(M.label+=' <span style="color: #ff2626">(plena!)</span>'),c.push(M)}),c}),n=O(()=>{const c=[];return Object.keys(i.value).forEach(d=>{!i.value[d].available&&d!==l.defaultRoom&&c.push(d)}),c}),u=O(()=>Object.values(o.value.hotels).filter(c=>c.id!==l.defaultHotel&&Object.values(c.rooms).find(d=>d.available)===void 0).map(c=>c.id)),i=O(()=>j.value.rooms),j=O(()=>a.value.hotelo?o.value.hotels[a.value.hotelo]:null),V=O(()=>j.value&&a.value.hotelo_cxambro?j.value.rooms[a.value.hotelo_cxambro]:null),F=O(()=>{const c={};return Object.keys(i.value).forEach(d=>{c[d]=`${i.value[d].roomname} – ${i.value[d].price} €`,i.value[d].people>1&&(c[d]+=" p.p."),n.value.includes(d)&&(c[d]+=' <span style="color: #ff2626">(plena!)</span>')}),c}),D=O(()=>a.value.hotelo_cxefmendanto!==""),P=O(()=>V.value&&(!j.value.payForRoom&&V.value.people>1||j.value.payForRoom&&(V.value.people>2||V.value.people==2&&!_.value))),x=O(()=>P.value&&j.value.payForRoom),B=O(()=>x.value?null:"Mi volas loĝi kun"),A=O(()=>j.value.payForRoom?"La indikita prezo estas por 1 nokto por 1 persono, sed vi kiel mendanto pagos por la tuta ĉambro.":V.value&&V.value.people>1?"La indikita prezo estas por 1 persono, ne por tuta ĉambro.":"La indikita prezo estas por 1 persono."),Y=O(()=>a.value.hotelo?H.value[a.value.hotelo]:!1),H=O(()=>{const c={};return Object.values(o.value.hotels).forEach(d=>{c[d.id]=d.parking}),v.value&&l.defaultHotel&&l.defaultParking&&(c[l.defaultHotel]=!0),c});function N(c){_.value=c.valid}function C(c){(!(c in o.value.hotels)||!(a.value.hotelo_cxambro in o.value.hotels[c].rooms))&&(a.value.hotelo_cxambro=null),(!(c in o.value.hotels)||!H.value[c])&&(a.value.parkloko=!1)}_.value=a.value.hotelo_kunlogxanto!=="",a.value.hotelo_de===""&&(a.value.hotelo_de=o.value.congressStart),a.value.hotelo_gxis===""&&(a.value.hotelo_gxis=o.value.congressEnd);const I=O(()=>{if(a.value.hotelo_de){let c=new Date(a.value.hotelo_de);return c.setDate(c.getDate()+j.value.minNights),c.toISOString().split("T")[0]}return j.value.start}),S=O(()=>{if(a.value.hotelo_gxis){let c=new Date(a.value.hotelo_gxis);return c.setDate(c.getDate()-j.value.minNights),c.toISOString().split("T")[0]}return j.value.end});return(c,d)=>{const M=b("n-alert"),E=b("n-space");return D.value?(p(),R(M,{key:0,title:"Jam mendita",type:"info",style:{"margin-bottom":"2rem"}},{default:m(()=>[g(k(a.value.hotelo_cxefmendanto_nomo)+" jam mendis loĝadon por vi. ",1)]),_:1})):(p(),y(U,{key:1},[r(W,{modelValue:a.value.hotelo,"onUpdate:modelValue":[d[0]||(d[0]=w=>a.value.hotelo=w),C],"field-name":"hotelo",options:h.value,"disabled-options":u.value,vertical:""},null,8,["modelValue","options","disabled-options"]),r(q,null,{default:m(()=>[a.value.hotelo?(p(),y("div",Ne,[r(E,null,{default:m(()=>[r(ee,{modelValue:a.value.hotelo_de,"onUpdate:modelValue":d[1]||(d[1]=w=>a.value.hotelo_de=w),"field-name":"hotelo_de",min:j.value.start,max:S.value},null,8,["modelValue","min","max"]),r(ee,{modelValue:a.value.hotelo_gxis,"onUpdate:modelValue":d[2]||(d[2]=w=>a.value.hotelo_gxis=w),"field-name":"hotelo_gxis",min:I.value,max:j.value.end},null,8,["modelValue","min","max"])]),_:1}),r(W,{modelValue:a.value.hotelo_cxambro,"onUpdate:modelValue":d[3]||(d[3]=w=>a.value.hotelo_cxambro=w),"field-name":"hotelo_cxambro",label:"Tipo de ĉambro",options:F.value,"disabled-options":n.value,vertical:"",required:"",style:{"margin-bottom":"1.5rem"},help:A.value},null,8,["modelValue","options","disabled-options","help"]),r(J,{modelValue:a.value.hotelo_alternativo,"onUpdate:modelValue":d[4]||(d[4]=w=>a.value.hotelo_alternativo=w),"field-name":"hotelo_alternativo"},null,8,["modelValue"]),r(q,null,{default:m(()=>[V.value&&j.value.payForRoom&&V.value.people===2?(p(),y("div",Se,[r(le,{modelValue:a.value.hotelo_kunlogxanto,"onUpdate:modelValue":d[5]||(d[5]=w=>a.value.hotelo_kunlogxanto=w),"field-name":"hotelo_kunlogxanto","current-user":a.value.uea_kodo,mode:"hotelo",help:"Se vi ne konas la UEA-kodon aŭ la persono ankoraŭ ne estas kongresano, bonvolu indiki la nomon en la sekva kampo.",onCodeChecked:N},null,8,["modelValue","current-user"])])):T("",!0)]),_:1}),r(q,null,{default:m(()=>[P.value?(p(),R(J,{key:0,style:{"margin-top":"1rem"},modelValue:a.value.hotelo_kunlogxanto2,"onUpdate:modelValue":d[6]||(d[6]=w=>a.value.hotelo_kunlogxanto2=w),"field-name":"hotelo_kunlogxanto2","default-label":B.value,required:x.value},null,8,["modelValue","default-label","required"])):T("",!0)]),_:1}),r(q,null,{default:m(()=>[Y.value?(p(),R(ne,{key:0,modelValue:a.value.parkloko,"onUpdate:modelValue":d[7]||(d[7]=w=>a.value.parkloko=w),"field-name":"parkloko"},null,8,["modelValue"])):T("",!0)]),_:1})])):T("",!0)]),_:1})],64))}}},Ee={name:"FormPrePostTrips",components:{TextInput:J,UeaCodeInput:le,SlideTransition:q,RadioInput:W},props:{modelValue:Object,type:String,defaultTrip:String,defaultRoom:String},emits:["update:modelValue"],data(){return{codeValid:!1}},computed:{...Q(["formOptions"]),form:{get(){return this.modelValue},set(t){this.$emit("update:modelValue",t)}},trips(){const t={"":"Mi ne mendas "+(this.type==="ak"?"antaŭ":"post")+"kongresan ekskurson"};return Object.values(this.formOptions.preposttrips).filter(e=>e.type===this.type).forEach(e=>{const l=Object.keys(e.rooms).length===1?e.rooms[""].price+" €":"",_=e.id[0]+e.id[2];t[e.id]=`${_}: ${e.name}`,l!==""&&(t[e.id]+=` – ${l}`),this.fullTrips.includes(e.id)&&(t[e.id]+=' <span style="color: #ff2626">(plena!)</span>')}),t},fullTrips(){return Object.values(this.formOptions.preposttrips).filter(t=>t.type===this.type&&t.id!==this.defaultTrip&&Object.values(t.rooms).find(e=>e.available)===void 0).map(t=>t.id)},fullRooms(){const t=[];return Object.keys(this.rooms).forEach(e=>{!this.rooms[e].available&&e!==this.defaultRoom&&t.push(e)}),t},rooms(){return this.formOptions.preposttrips[this.form[this.type]].rooms},roomOptions(){const t={};return Object.keys(this.rooms).forEach(e=>{t[e]=`${this.rooms[e].roomname} – ${this.rooms[e].price} €`,this.fullRooms.includes(e)&&(t[e]+=' <span style="color: #ff2626">(plena!)</span>')}),t},alreadyBooked(){return this.form[this.type+"_cxefmendanto"]!==""},pickedRoom(){return!this.form[this.type]||!this.form[this.type+"_cxambro"]?null:this.formOptions.preposttrips[this.form[this.type]].rooms[this.form[this.type+"_cxambro"]]},showRoommate2(){return this.pickedRoom&&(this.pickedRoom.people>2||this.pickedRoom.people==2&&!this.codeValid)}},methods:{ueaCodeResult(t){this.codeValid=t.valid}}},qe={key:0},Le={key:0};function Ae(t,e,l,_,f,o){const v=b("n-alert"),a=b("radio-input"),h=b("uea-code-input"),n=b("text-input"),u=b("slide-transition");return o.alreadyBooked?(p(),R(v,{key:0,title:"Jam mendita",type:"info",style:{"margin-bottom":"2rem"}},{default:m(()=>[g(k(o.form[l.type+"_cxefmendanto_nomo"])+" jam mendis "+k(l.type==="ak"?"antaŭ":"post")+"kongreson por vi. ",1)]),_:1})):(p(),y(U,{key:1},[r(a,{modelValue:o.form[l.type],"onUpdate:modelValue":e[0]||(e[0]=i=>o.form[l.type]=i),"field-name":l.type,options:o.trips,"disabled-options":o.fullTrips,vertical:""},null,8,["modelValue","field-name","options","disabled-options"]),r(u,null,{default:m(()=>[o.form[l.type]&&Object.keys(o.rooms).length>1?(p(),y("div",qe,[r(a,{modelValue:o.form[l.type+"_cxambro"],"onUpdate:modelValue":e[1]||(e[1]=i=>o.form[l.type+"_cxambro"]=i),"field-name":l.type+"_cxambro",options:o.roomOptions,"disabled-options":o.fullRooms,vertical:"",required:"",style:{"margin-bottom":"1.5rem"},help:"La indikita prezo estas por 1 persono, sed vi kiel mendanto pagos por la tuta ĉambro."},null,8,["modelValue","field-name","options","disabled-options"]),r(u,null,{default:m(()=>[o.pickedRoom&&o.pickedRoom.people===2?(p(),y("div",Le,[r(h,{modelValue:o.form[l.type+"_kunlogxanto"],"onUpdate:modelValue":e[2]||(e[2]=i=>o.form[l.type+"_kunlogxanto"]=i),"field-name":l.type+"_kunlogxanto","current-user":o.form.uea_kodo,mode:l.type,help:"Se vi ne konas la UEA-kodon aŭ la persono ankoraŭ ne estas kongresano, bonvolu indiki la nomon en la sekva kampo.",onCodeChecked:o.ueaCodeResult},null,8,["modelValue","field-name","current-user","mode","onCodeChecked"]),r(u,null,{default:m(()=>[o.showRoommate2?(p(),R(n,{key:0,style:{"margin-top":"1rem"},modelValue:o.form[l.type+"_kunlogxanto2"],"onUpdate:modelValue":e[3]||(e[3]=i=>o.form[l.type+"_kunlogxanto2"]=i),"field-name":l.type+"_kunlogxanto2",required:""},null,8,["modelValue","field-name"])):T("",!0)]),_:1})])):T("",!0)]),_:1})])):T("",!0)]),_:1})],64))}const He=L(Ee,[["render",Ae]]);const ze={name:"FormBookingPrice",props:{form:Object},computed:{...Q(["formOptions","prices"]),banquetPrice(){return this.form.bankedo===this.formOptions.boolValues.yes?this.prices.banquet:0},tripsWithPrices(){const t={};return this.formOptions.trips.forEach(e=>{e.sessions.forEach(l=>{this.form.ekskursoj.includes(l.id)&&(t[l.fullName]=e.price)})}),t},tripsPrice(){return Object.values(this.tripsWithPrices).reduce((t,e)=>t+e,0)},hotelName(){return this.formOptions.hotels[this.form.hotelo].name},peopleInRoom(){return this.formOptions.hotels[this.form.hotelo].payForRoom?this.formOptions.hotels[this.form.hotelo].rooms[this.form.hotelo_cxambro].people:1},roomPrice(){return this.formOptions.hotels[this.form.hotelo].rooms[this.form.hotelo_cxambro].price},nights(){return this.daysBetweenDates(this.form.hotelo_de,this.form.hotelo_gxis)},hotelPrice(){return this.form.hotelo_cxefmendanto!==""||!this.form.hotelo||!this.form.hotelo_cxambro||!this.form.hotelo_de||!this.form.hotelo_gxis?0:this.roomPrice*this.peopleInRoom*this.nights},preCongressName(){return this.formOptions.preposttrips[this.form.ak].name},preCongressPriceForOne(){const t=this.formOptions.preposttrips[this.form.ak].rooms;return this.form.ak_cxambro in t?t[this.form.ak_cxambro].price:null},preCongressPeople(){return this.formOptions.preposttrips[this.form.ak].rooms[this.form.ak_cxambro].people},preCongressPrice(){return this.form.ak_cxefmendanto!==""||!this.form.ak||this.preCongressPriceForOne===null?0:this.preCongressPriceForOne*this.preCongressPeople},postCongressName(){return this.formOptions.preposttrips[this.form.pk].name},postCongressPriceForOne(){const t=this.formOptions.preposttrips[this.form.pk].rooms;return this.form.pk_cxambro in t?t[this.form.pk_cxambro].price:null},postCongressPeople(){return this.formOptions.preposttrips[this.form.pk].rooms[this.form.pk_cxambro].people},postCongressPrice(){return this.form.pk_cxefmendanto!==""||!this.form.pk||this.postCongressPriceForOne===null?0:this.postCongressPriceForOne*this.postCongressPeople},transportationPrice(){return"transporta_bileto"in this.form&&this.form.transporta_bileto?this.prices.transportation:0},sum(){return Math.max(0,this.banquetPrice+this.tripsPrice+this.hotelPrice+this.preCongressPrice+this.postCongressPrice+this.transportationPrice-this.form.sumo_rabato_mendo+this.form.sumo_malrabato_mendo)}},methods:{j(t){return t>1?"j":""},daysBetweenDates(t,e){const _=new Date(t),f=new Date(e);return Math.round(Math.abs((_-f)/864e5))}}},Ge={key:0},Ke={key:1},We={key:2},Je={key:3},Xe={key:4},Qe={key:5},Ye={key:6},Ze={key:7},$e={class:"sum"},eo={class:"sum"},oo={class:"sum"};function to(t,e,l,_,f,o){const v=b("n-p");return p(),y(U,null,[s("table",null,[s("tbody",null,[o.banquetPrice>0?(p(),y("tr",Ge,[e[0]||(e[0]=s("td",null,"Bankedo",-1)),e[1]||(e[1]=s("td",null,null,-1)),s("td",null,k(o.banquetPrice)+" €",1)])):T("",!0),o.hotelPrice>0?(p(),y("tr",Ke,[e[3]||(e[3]=s("td",null,"Hotelo",-1)),s("td",null,[g(k(o.hotelName),1),e[2]||(e[2]=s("br",null,null,-1)),g(" "+k(o.roomPrice)+" € × "+k(o.peopleInRoom)+" persono"+k(o.j(o.peopleInRoom))+" × "+k(o.nights)+" nokto"+k(o.j(o.nights)),1)]),s("td",null,k(o.hotelPrice)+" €",1)])):T("",!0),o.preCongressPrice>0?(p(),y("tr",We,[e[5]||(e[5]=s("td",null,"Antaŭkongresa ekskurso",-1)),s("td",null,[g(k(o.preCongressName),1),e[4]||(e[4]=s("br",null,null,-1)),g(" "+k(o.preCongressPriceForOne)+" € × "+k(o.preCongressPeople)+" persono"+k(o.j(o.preCongressPeople)),1)]),s("td",null,k(o.preCongressPrice)+" €",1)])):T("",!0),o.postCongressPrice>0?(p(),y("tr",Je,[e[7]||(e[7]=s("td",null,"Postkongresa ekskurso",-1)),s("td",null,[g(k(o.postCongressName),1),e[6]||(e[6]=s("br",null,null,-1)),g(" "+k(o.postCongressPriceForOne)+" € × "+k(o.postCongressPeople)+" persono"+k(o.j(o.postCongressPeople)),1)]),s("td",null,k(o.postCongressPrice)+" €",1)])):T("",!0),o.tripsPrice>0?(p(),y("tr",Xe,[e[9]||(e[9]=s("td",null,"Ekskursoj",-1)),s("td",null,[s("ul",null,[(p(!0),y(U,null,K(o.tripsWithPrices,(a,h,n)=>(p(),y("li",{key:n},[g(k(h),1),e[8]||(e[8]=s("br",null,null,-1)),g(k(a)+" €",1)]))),128))])]),s("td",null,k(o.tripsPrice)+" €",1)])):T("",!0),o.transportationPrice>0?(p(),y("tr",Qe,[e[10]||(e[10]=s("td",null,"Semajna bileto por publika transporto",-1)),e[11]||(e[11]=s("td",null,null,-1)),s("td",null,k(o.transportationPrice)+" €",1)])):T("",!0),l.form.sumo_rabato_mendo>0?(p(),y("tr",Ye,[e[12]||(e[12]=s("td",null,"Rabato por la mendo",-1)),e[13]||(e[13]=s("td",null,null,-1)),s("td",null,k(l.form.sumo_rabato_mendo*-1)+" €",1)])):T("",!0),l.form.sumo_malrabato_mendo>0?(p(),y("tr",Ze,[e[14]||(e[14]=s("td",null,"Krompago por la mendo",-1)),e[15]||(e[15]=s("td",null,null,-1)),s("td",null,k(l.form.sumo_malrabato_mendo)+" €",1)])):T("",!0),s("tr",$e,[e[16]||(e[16]=s("td",null,"Sumo",-1)),e[17]||(e[17]=s("td",null,null,-1)),s("td",null,k(o.sum)+" €",1)]),l.form.sumo_mendo_pagita?(p(),y(U,{key:8},[s("tr",eo,[e[18]||(e[18]=s("td",null,"Jam pagita sumo",-1)),e[19]||(e[19]=s("td",null,null,-1)),s("td",null,k(l.form.sumo_mendo_pagita)+" €",1)]),s("tr",oo,[s("td",null,k(l.form.sumo_mendo_pagita>o.sum?"Repagota":"Ankoraŭ pagenda")+" sumo",1),e[20]||(e[20]=s("td",null,null,-1)),s("td",null,k(o.sum-l.form.sumo_mendo_pagita)+" €",1)])],64)):T("",!0)])]),o.sum>0?(p(),R(v,{key:0},{default:m(()=>e[21]||(e[21]=[g("Detalojn pri pagmanieroj vi ricevos retpoŝte post kontrolo de via mendo.")])),_:1})):T("",!0)],64)}const lo=L(ze,[["render",to],["__scopeId","data-v-aa65a22f"]]),no={components:{CheckboxInput:ne,FormBookingPrice:lo,FormInvitation:Be,FormTrips:Te,TextInput:J,FormHotels:Me,FormPrePostTrips:He,SlideTransition:q,RadioInput:W},props:{modelValue:{type:Object,required:!0},defaultData:{type:Object,required:!0},foodTypeRequired:{type:Boolean,required:!0},foodTypeCompanionRequired:{type:Boolean,required:!0}},emits:["update:modelValue"],name:"FormBooking",computed:{...Q(["formOptions"]),form:{get(){return this.modelValue},set(t){this.$emit("update:modelValue",t)}}},mounted(){this.scrollTo("mendilo",12)}},ao={key:0,style:{"margin-top":"2rem"}};function ro(t,e,l,_,f,o){const v=b("n-h4"),a=b("form-invitation"),h=b("router-link"),n=b("n-p"),u=b("radio-input"),i=b("slide-transition"),j=b("form-hotels"),V=b("form-pre-post-trips"),F=b("form-trips"),D=b("text-input"),P=b("form-booking-price");return p(),y(U,null,[r(v,null,{default:m(()=>e[9]||(e[9]=[g("Invitilo")])),_:1}),r(a,{"default-name":(l.defaultData.persona_nomo+" "+l.defaultData.familia_nomo).trim(),"default-country":l.defaultData.lando,"default-birthdate":l.defaultData.naskigxdato},null,8,["default-name","default-country","default-birthdate"]),r(v,null,{default:m(()=>e[10]||(e[10]=[g("Bankedo")])),_:1}),r(n,null,{default:m(()=>[e[12]||(e[12]=g(" La ĉi-jara bankedo havos formon de bufedo, kie oni mem iros elekti kaj surtelerigi manĝojn laŭ sia prefero.")),e[13]||(e[13]=s("br",null,null,-1)),e[14]||(e[14]=g(" La bufedo enhavos diversajn pladojn, kiuj taŭgos por viandmanĝantoj, vegetaranoj kaj veganoj. Pli da informoj en la ")),r(h,{to:{name:"duaBulteno"}},{default:m(()=>e[11]||(e[11]=[g("Dua Bulteno")])),_:1}),e[15]||(e[15]=g(". "))]),_:1}),r(u,{modelValue:o.form.bankedo,"onUpdate:modelValue":e[0]||(e[0]=x=>o.form.bankedo=x),"field-name":"bankedo",options:t.formOptions.banquet,vertical:""},null,8,["modelValue","options"]),r(i,null,{default:m(()=>[o.form.bankedo===t.formOptions.boolValues.yes?(p(),R(u,{key:0,modelValue:o.form.bankedo_tipo,"onUpdate:modelValue":e[1]||(e[1]=x=>o.form.bankedo_tipo=x),"field-name":"bankedo_tipo",options:["kunviande","vegetare","vegane"],vertical:"",required:"",help:"Via elekto helpos al ni plani la ĝustajn kvantojn de manĝaĵoj laŭ la manĝotipoj."},null,8,["modelValue"])):T("",!0)]),_:1}),r(v,null,{default:m(()=>e[16]||(e[16]=[g("Hotelo")])),_:1}),r(j,{modelValue:o.form,"onUpdate:modelValue":e[2]||(e[2]=x=>o.form=x),"default-hotel":l.defaultData.hotelo,"default-room":l.defaultData.hotelo_cxambro,"default-parking":l.defaultData.parkloko},null,8,["modelValue","default-hotel","default-room","default-parking"]),r(v,null,{default:m(()=>e[17]||(e[17]=[g("Antaŭkongresa ekskurso")])),_:1}),r(V,{modelValue:o.form,"onUpdate:modelValue":e[3]||(e[3]=x=>o.form=x),"default-trip":l.defaultData.ak,"default-room":l.defaultData.ak_cxambro,type:"ak"},null,8,["modelValue","default-trip","default-room"]),r(v,null,{default:m(()=>e[18]||(e[18]=[g("Postkongresa ekskurso")])),_:1}),r(V,{modelValue:o.form,"onUpdate:modelValue":e[4]||(e[4]=x=>o.form=x),"default-trip":l.defaultData.pk,"default-room":l.defaultData.pk_cxambro,type:"pk"},null,8,["modelValue","default-trip","default-room"]),r(v,null,{default:m(()=>e[19]||(e[19]=[g("Ekskursoj")])),_:1}),r(F,{"default-trips":l.defaultData.ekskursoj,modelValue:o.form.ekskursoj,"onUpdate:modelValue":e[5]||(e[5]=x=>o.form.ekskursoj=x)},null,8,["default-trips","modelValue"]),r(i,null,{default:m(()=>[l.foodTypeRequired?(p(),y("div",ao,[r(v,null,{default:m(()=>e[20]||(e[20]=[g("Manĝotipo dum ekskursoj")])),_:1}),r(u,{modelValue:o.form.mangxotipo,"onUpdate:modelValue":e[6]||(e[6]=x=>o.form.mangxotipo=x),"field-name":"mangxotipo",options:t.formOptions.foodtypes,required:!0,label:"Bonvolu elekti manĝotipon, kiun vi mendas por la tuttagaj, antaŭ- kaj/aŭ postkongresaj ekskursoj."},null,8,["modelValue","options"]),l.foodTypeCompanionRequired?(p(),R(D,{key:0,style:{"margin-top":"1rem"},modelValue:o.form.mangxotipo_kunlogxanto,"onUpdate:modelValue":e[7]||(e[7]=x=>o.form.mangxotipo_kunlogxanto=x),"field-name":"mangxotipo_kunlogxanto",required:""},null,8,["modelValue"])):T("",!0)])):T("",!0)]),_:1}),r(v,null,{default:m(()=>e[21]||(e[21]=[g("Komentoj")])),_:1}),r(D,{modelValue:o.form.komento_mendo,"onUpdate:modelValue":e[8]||(e[8]=x=>o.form.komento_mendo=x),"field-name":"komento_mendo",type:"textarea"},null,8,["modelValue"]),r(v,null,{default:m(()=>e[22]||(e[22]=[g("Prezo de la mendo")])),_:1}),r(P,{form:o.form},null,8,["form"])],64)}const io=L(no,[["render",ro]]);export{io as default};
